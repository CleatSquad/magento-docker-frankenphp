# Nginx + PHP-FPM Stack using Mark Shust's images
# https://github.com/markshust/docker-magento
#
# Note: Mark Shust's images are designed for Magento and use:
# - Unix sockets for Nginx <-> PHP-FPM communication
# - Port 8000 for HTTP
# - Port 8443 for HTTPS with SSL
services:
  nginx:
    image: markoshust/magento-nginx:1.24
    container_name: benchmark-nginx
    ports:
      - "8080:8000"
    volumes:
      - ./html:/var/www/html:cached
      - sockdata:/sock
    depends_on:
      - php-fpm
    networks:
      - benchmark

  php-fpm:
    image: markoshust/magento-php:8.4-fpm
    container_name: benchmark-php-fpm
    volumes:
      - ./html:/var/www/html:cached
      - sockdata:/sock
    networks:
      - benchmark

networks:
  benchmark:

volumes:
  sockdata:
